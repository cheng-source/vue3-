<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // let arr = ['foo', 'bar'];
        // // 迭代器工厂函数
        // console.log(arr[Symbol.iterator]); // ƒ values() { [native code] }
        // // 调用迭代器工厂函数生成迭代器
        // let iter = arr[Symbol.iterator](); // Array Iterator {}
        // console.log(iter);
        // // 执行迭代
        // console.log(iter.next()); // {value: 'foo', done: false}
        // console.log(iter.next()); // {value: 'bar', done: false}
        // console.log(iter.next()); // {value: undefined, done: true}

        // 迭代器的实现
        // class Foo {
        //     [Symbol.iterator]() {
        //         return {
        //             next() {
        //                 return {
        //                     done: false,
        //                     value: foo
        //                 };
        //             }
        //         }
        //     }
        // }
        // let foo = new Foo();
        // // 迭代器
        // let fooIter = foo[Symbol.iterator]();
        // console.log(fooIter); // {next: ƒ}
        // // 执行迭代器
        // console.log(fooIter.next()); // {done: false, value: Foo}
        // console.log(fooIter.next()); // {done: false, value: Foo}

        class Counter {
            constructor(limit) {
                this.count = 1;
                this.limit = limit;
            }
            next() {
                    if (this.count <= this.limit) {
                        return {
                            done: false,
                            value: this.count++
                        }
                    } else {
                        return {
                            done: true,
                            value: undefined
                        };
                    }
                }
                [Symbol.iterator]() {
                    return this;
                }
        }
        let counter = new Counter(3);
        for (let i of counter) {
            console.log(i);
        }
        for (let i of counter) {
            console.log(1);
            console.log(i);
        }
    </script>
</body>

</html>